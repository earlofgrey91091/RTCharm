mainmodule RTCharm {
  readonly CProxy_Main mainProxy;
  readonly int Total_iterations;
  mainchare Main {
    entry Main(CkArgMsg *m);
  };

  array [2D] PixelChare {
    entry PixelChare(void);
    entry void run(void){

	atomic "Interation block" {
	iteration++;
	CkPrintf("\n Iteration %d", iteration);
	if(iteration < Total_iterations) {
		//do stuff


	run();
	}

	}	
    }; 
  };        	
};
